<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mouse Events</title>

    <style>

        #canvas {
            border: 1px black solid;
        }

    </style>

</head>
<body>


<P>Click the mouse on the canvas</P>
<canvas id="canvas" height="400" width="400"></canvas>

<br><input type="text" id="color">
<button id="color_select">press me</button>

<script>

    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    let color = 'Black';
    let button = document.querySelector('#color_select');



    var mousedown = false;

    canvas.addEventListener("mousedown", function() {
        mousedown = true
    });

    canvas.addEventListener("mouseup", function() {
        mousedown = false
    });


    canvas.addEventListener("mousemove", function() {

        if (!mousedown) { return; }

        // event is a built-in variable, contains the event that triggered this function
        // get the x, y location of the event
        var x = event.offsetX;
        var y = event.offsetY;   //offsetX, offsetY, may not work in older browsers

        button.addEventListener("click",function () {
            color = document.querySelector("#color").value;
            context.fillStyle = color;
        });

        context.beginPath();
        context.arc(x-5, y-5,8,0,2*Math.PI);

        context.fill();
        context.stroke();

    })

</script>

</body>
</html>